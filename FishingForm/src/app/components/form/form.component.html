<div class="container">
    <h2>Buy a ticket</h2>

    <p>{{ticketForm.value | json}}</p>

    <form [formGroup]="ticketForm" class="ticketForm" (ngSubmit)="onSubmit()">

        <h4>Данни за клиента:</h4>
        <div formGroupName="profile">

            <div class="form-control">
                <!-- <app-input text="First Name" identificator="firstName"></app-input> -->
                <!-- <label for="firstName">First Name: </label>
                <input id="firstName" type="text" formControlName="firstName" placeholder="Enter your first name"> -->


                <mat-form-field class="ticket-form-field" appearance="fill">
                    <mat-label>Първо име</mat-label>
                    <input matInput id="firstName" type="text" formControlName="firstName">
                    <mat-error *ngIf="this.ticketForm.get('profile.firstName')?.touched && this.ticketForm.get('profile.firstName')?.hasError('required')">
                        Полето е <strong> задължително! </strong></mat-error>
                </mat-form-field>
            </div>

            <div class="form-control">
                <mat-form-field class="ticket-form-field" appearance="fill">
                    <mat-label>Бащино име</mat-label>
                    <input matInput id="middleName" type="text" formControlName="middleName">
                    <mat-error *ngIf="this.ticketForm.get('profile.middleName')?.touched && this.ticketForm.get('profile.middleName')?.hasError('required')">
                        Полето е <strong> задължително! </strong></mat-error>
                </mat-form-field>
            </div>

            <div class="form-control">
                <mat-form-field class="ticket-form-field" appearance="fill">
                    <mat-label>Фамилия</mat-label>
                    <input matInput id="lastName" type="text" formControlName="lastName">
                    <mat-error *ngIf="this.ticketForm.get('profile.lastName')?.touched && this.ticketForm.get('profile.lastName')?.hasError('required')">
                        Полето е <strong> задължително! </strong></mat-error>
                </mat-form-field>
            </div>

            <div class="form-control">

                <mat-form-field class="ticket-form-field" appearance="fill">
                    <mat-label>Тел. номер</mat-label>
                    <input matInput id="phoneNumber" type="text" formControlName="phoneNumber">
                    <mat-error *ngIf="this.ticketForm.get('profile.phoneNumber')?.touched && this.ticketForm.get('profile.phoneNumber')?.hasError('required')">
                        Полето е <strong> задължително! </strong></mat-error>
                    <mat-error *ngIf="this.ticketForm.get('profile.phoneNumber')?.hasError('pattern')">
                        Полето трява да съдържа <strong> 10 цифри! </strong></mat-error>
                </mat-form-field>

            </div>

            <div class="form-control">
                <!-- <label for="email">Email: </label>
                <input id="email" type="text" formControlName="email" placeholder="Enter your email">
                -->
                <mat-form-field class="form-full-width" appearance="fill">
                    <mat-label>Ел. поща</mat-label>
                    <input type="email" matInput formControlName="email" placeholder="Ex.mes@example.com">
                    <mat-error *ngIf="(this.ticketForm.get('profile.email')?.touched && this.ticketForm.get('profile.email')?.hasError('email'))">
                        Моля въведете <strong> валидна ел. поща </strong>
                    </mat-error>
                    <mat-error *ngIf="this.ticketForm.get('profile.email')?.hasError('required')">
                        Полето е <strong>задължителна!</strong>
                    </mat-error>
                </mat-form-field>

            </div>

            <div class="form-control">

                <mat-form-field class="ticket-form-field" appearance="fill">
                    <mat-label>Номер на лична карта</mat-label>
                    <input matInput id="idCardNumber" type="number" formControlName="idCardNumber">
                    <mat-error *ngIf="this.ticketForm.get('profile.idCardNumber')?.touched && this.ticketForm.get('profile.idCardNumber')?.hasError('required')">
                        Полето е <strong> задължително! </strong></mat-error>
                    <mat-error *ngIf="this.ticketForm.get('profile.idCardNumber')?.hasError('min') || this.ticketForm.get('profile.idCardNumber')?.hasError('max')">
                        Полето трябва да е с дължина <strong> 9 символа! </strong></mat-error>
                </mat-form-field>
            </div>

            <div class="form-control">

                <mat-form-field class="ticket-form-field" appearance="fill">
                    <mat-label>ЕГН</mat-label>
                    <input matInput id="identificationNumber" type="number" formControlName="identificationNumber">
                    <mat-error *ngIf="this.ticketForm.get('profile.identificationNumber')?.hasError('forbiddenName') ">
                        Невалидно ЕГН!
                    </mat-error>
                    <mat-error *ngIf="this.ticketForm.get('profile.identificationNumber')?.hasError('min')">
                        Полето трябва да е с дължина <strong> 10 символа! </strong>
                    </mat-error>
                    <mat-error *ngIf="this.ticketForm.get('profile.identificationNumber')?.hasError('required')">
                        Полето е <strong> задължително! </strong>
                    </mat-error>

                </mat-form-field>

            </div>

            <div formGroupName="address">
                <div class="form-control">

                    <mat-form-field appearance="fill" class="ticket-form-field">
                        <mat-label>Държава</mat-label>
                        <mat-select disableRipple id="country" name="country" formControlName="country">
                            <!-- To do: Implement ngFor -->
                            <mat-option value="1">Option 1</mat-option>
                            <mat-option value="2">Option 2</mat-option>
                            <mat-option value="3">Option 3</mat-option>
                        </mat-select>
                        <mat-error *ngIf="this.ticketForm.get('profile.address.country')?.touched && this.ticketForm.get('profile.address.country')?.hasError('required')">
                            Полето е <strong> задължително! </strong></mat-error>
                    </mat-form-field>

                </div>

                <div class="form-control">
                    <mat-form-field appearance="fill" class="ticket-form-field">
                        <mat-label>Област</mat-label>
                        <mat-select disableRipple id="area" name="area" formControlName="area">
                            <!-- To do: Implement ngFor -->
                            <mat-option value="1">Option 1</mat-option>
                            <mat-option value="2">Option 2</mat-option>
                            <mat-option value="3">Option 3</mat-option>
                        </mat-select>
                        <mat-error *ngIf="this.ticketForm.get('profile.address.area')?.touched && this.ticketForm.get('profile.address.area')?.hasError('required')">
                            Полето е <strong> задължително! </strong></mat-error>
                    </mat-form-field>
                </div>

                <div class="form-control">
                    <mat-form-field appearance="fill" class="ticket-form-field">
                        <mat-label>Община</mat-label>
                        <mat-select disableRipple id="municipality" name="municipality" formControlName="municipality">
                            <!-- To do: Implement ngFor -->
                            <mat-option value="1">Option 1</mat-option>
                            <mat-option value="2">Option 2</mat-option>
                            <mat-option value="3">Option 3</mat-option>
                        </mat-select>
                        <mat-error *ngIf="this.ticketForm.get('profile.address.municipality')?.touched && this.ticketForm.get('profile.address.municipality')?.hasError('required')">
                            Полето е <strong> задължително! </strong></mat-error>
                    </mat-form-field>
                </div>

                <div class="form-control">
                    <mat-form-field appearance="fill" class="ticket-form-field">
                        <mat-label>Град</mat-label>
                        <mat-select disableRipple id="city" name="city" formControlName="city">
                            <!-- To do: Implement ngFor -->
                            <mat-option value="1">Option 1</mat-option>
                            <mat-option value="2">Option 2</mat-option>
                            <mat-option value="3">Option 3</mat-option>
                        </mat-select>
                        <mat-error *ngIf="this.ticketForm.get('profile.address.city')?.touched && this.ticketForm.get('profile.address.city')?.hasError('required')">
                            Полето е <strong> задължително! </strong></mat-error>
                    </mat-form-field>
                </div>

                <div class="form-control">
                    <mat-form-field class="ticket-form-field" appearance="fill">
                        <mat-label>Улица</mat-label>
                        <input matInput id="street" type="text" formControlName="street">
                        <mat-error *ngIf="this.ticketForm.get('profile.address.street')?.touched && this.ticketForm.get('profile.address.street')?.hasError('required')">
                            Полето е <strong> задължително! </strong></mat-error>
                    </mat-form-field>
                </div>
            </div>

        </div>

        <h4>Данни на билета:</h4>
        <div formGroupName="ticket">

            <div class="form-control custom-select">
                <mat-form-field appearance="fill" class="ticket-form-field">
                    <mat-label>Тип</mat-label>
                    <mat-select disableRipple id="type" name="type" formControlName="type">
                        <!-- To do: Implement ngFor -->
                        <mat-option *ngFor="let type of types" [value]="type">{{type}}</mat-option>
                    </mat-select>
                    <mat-error *ngIf="this.ticketForm.get('ticket.type')?.touched && this.ticketForm.get('ticket.type')?.hasError('required')">
                        Полето е <strong> задължително! </strong></mat-error>
                </mat-form-field>
            </div>

            <div class="form-control">
                <mat-form-field appearance="fill" class="ticket-form-field">
                    <mat-label>Времетраене</mat-label>
                    <mat-select disableRipple id="duration" name="duration" formControlName="duration">
                        <!-- To do: Implement ngFor -->
                        <mat-option *ngFor="let dur of durations" [value]="dur">{{dur}}</mat-option>
                    </mat-select>
                    <mat-error *ngIf="this.ticketForm.get('ticket.duration')?.touched && this.ticketForm.get('ticket.duration')?.hasError('required')">
                        Полето е <strong> задължително! </strong></mat-error>
                </mat-form-field>
            </div>

        </div>


        <p class="center">Цена: {{price | currency : "BGN "}}</p>
        <app-button color="blue" text="Изпрати" (click)="submitData()"></app-button>
    </form>

</div>